<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="date" content="2017-07-20" />

<title>VLP Brown Example: C44</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">VLP Brown Example: C44</h1>
<h4 class="date"><em>2017-07-20</em></h4>



<div id="example-c44-by-hagendorn-brown" class="section level2">
<h2>Example C44 by Hagendorn-Brown</h2>
<p>This notebook runs the modified Hagedorn-Brown correlation calculated according to Brownâ€™s book and procedure in Appendix C. Although the question is not really pointed at finding the bottomhole flowing pressure given the surface conditions and the wellhead pressure but rather calculating the length of the tubing if BHP is known, the calculations here demonstrate that both can be calculated or verified using this algorithm.</p>
<p>The pressures at both ends of the tubing: P1 is 500 psia and P2 1000 psia.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(rNodal)
<span class="kw">library</span>(tibble)

<span class="co"># Example from C.44 in Brown's book</span>
<span class="co"># P2 (pressure at end point is given in the original example). </span>
<span class="co"># The original question is: what is the length of the tubing.</span>
<span class="co">#</span>
<span class="co"># In our case we aproximately know the length (from the book), so we will try to</span>
<span class="co"># match P2 (known)</span>
<span class="co">#</span>
<span class="co"># Differences with Example C.13:</span>
<span class="co"># GLR, watercut, oil viscosity and API are different in C.44</span>
<span class="co">#</span>
<span class="co"># The final results are very close to those of Brown.</span>


input_example &lt;-<span class="st"> </span><span class="kw">setWellInput</span>(<span class="dt">field.name =</span> <span class="st">&quot;HAGBR.MOD&quot;</span>,
                                 <span class="dt">well.name =</span> <span class="st">&quot;Brown_C44&quot;</span>, 
                                 <span class="dt">depth.wh =</span> <span class="dv">0</span>, <span class="dt">depth.bh =</span> <span class="dv">3590</span>, 
                                 <span class="dt">diam.in =</span> <span class="fl">1.995</span>, 
                                 <span class="dt">GLR =</span> <span class="dv">1000</span>, <span class="dt">liq.rt =</span> <span class="dv">600</span>, <span class="dt">wcut =</span> <span class="fl">0.0</span>, 
                                 <span class="dt">thp =</span> <span class="dv">500</span>, <span class="dt">tht =</span> <span class="dv">120</span>, <span class="dt">bht =</span> <span class="dv">150</span>, 
                                 <span class="dt">API =</span> <span class="dv">42</span>, <span class="dt">oil.visc =</span> <span class="fl">1.0</span>, 
                                 <span class="dt">gas.sg =</span> <span class="fl">0.65</span>, <span class="dt">wat.sg =</span> <span class="fl">1.07</span>, <span class="dt">if.tens =</span> <span class="dv">30</span>
                                 )

well_model &lt;-<span class="st"> </span><span class="kw">setVLPmodel</span>(<span class="dt">vlp.model =</span> <span class="st">&quot;hagbr.mod&quot;</span>, <span class="dt">segments =</span> <span class="dv">15</span>, <span class="dt">tol =</span> <span class="fl">0.00001</span>)


<span class="kw">as.tibble</span>(<span class="kw">runVLP</span>(<span class="dt">well.input =</span> input_example, well_model))</code></pre></div>
<pre><code># A tibble: 16 x 45
       i     depth       dL  temp     pres    p_avg t_avg segment   GOR
   &lt;int&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
 1     1    0.0000   0.0000   120 500.0000 500.0000   120       0  1000
 2     2  239.3333 239.3333   122 524.5052 512.2526   121       1  1000
 3     3  478.6667 239.3333   124 549.3611 536.9339   123       2  1000
 4     4  718.0000 239.3333   126 574.5716 561.9679   125       3  1000
 5     5  957.3333 239.3333   128 600.1371 587.3559   127       4  1000
 6     6 1196.6667 239.3333   130 626.0597 613.0999   129       5  1000
 7     7 1436.0000 239.3333   132 652.3409 639.2018   131       6  1000
 8     8 1675.3333 239.3333   134 678.9822 665.6630   133       7  1000
 9     9 1914.6667 239.3333   136 705.9847 692.4849   135       8  1000
10    10 2154.0000 239.3333   138 733.3494 719.6685   137       9  1000
11    11 2393.3333 239.3333   140 761.0773 747.2148   139      10  1000
12    12 2632.6667 239.3333   142 789.1689 775.1245   141      11  1000
13    13 2872.0000 239.3333   144 817.6246 803.3981   143      12  1000
14    14 3111.3333 239.3333   146 846.4448 832.0361   145      13  1000
15    15 3350.6667 239.3333   148 875.6296 861.0385   147      14  1000
16    16 3590.0000 239.3333   150 905.1789 890.4056   149      15  1000
# ... with 36 more variables: Rs &lt;dbl&gt;, gas.fvf &lt;dbl&gt;, gas.free &lt;dbl&gt;,
#   liq.dens &lt;dbl&gt;, z &lt;dbl&gt;, gas.dens &lt;dbl&gt;, oil.visc &lt;dbl&gt;,
#   wat.visc &lt;dbl&gt;, mixL.visc &lt;dbl&gt;, oil.fvf &lt;dbl&gt;, wat.fvf &lt;dbl&gt;,
#   liq.svel &lt;dbl&gt;, gas.svel &lt;dbl&gt;, NL &lt;dbl&gt;, CNL &lt;dbl&gt;, NLV &lt;dbl&gt;,
#   NGV &lt;dbl&gt;, A &lt;dbl&gt;, B &lt;dbl&gt;, BA &lt;dbl&gt;, ND &lt;dbl&gt;, X2 &lt;dbl&gt;,
#   HL.psi &lt;dbl&gt;, X2.mod &lt;dbl&gt;, psi &lt;dbl&gt;, HL &lt;dbl&gt;, Re.TP &lt;dbl&gt;,
#   ff &lt;dbl&gt;, mix.dens &lt;dbl&gt;, mixL.volume &lt;dbl&gt;, mixL.dens &lt;dbl&gt;,
#   mixTP.dens &lt;dbl&gt;, mixTP.svel &lt;dbl&gt;, elev.grad &lt;dbl&gt;, fric.grad &lt;dbl&gt;,
#   dp.dz &lt;dbl&gt;</code></pre>
<pre><code>p30 = 906.7220
p30 = 906.7217 (with zFactor)
p30 = 908.1580
p30-9 = 958.1</code></pre>
<p><a href="C:\Users\msfz751\AppData\Local\Temp\RtmpEbxvPR\file40c0446c2f7.h5">h5 temp</a></p>
<p><a href="I:\src\rNodal\inst\extdata\brown_c44.h5">hdf5 in inst/extdata</a></p>
<pre><code>    MD      TVD     Pres    Temp  
    0       0       500.0   128.5
    239.3   239.3   528.4   130.4
    478.7   478.7   557.2   132.4
    718.0   718.0   586.2   134.2
    957.3   957.3   615.6   136.1
    1196.7  1196.7  645.2   137.9
    1436.0  1436.0  675.2   139.7
    1675.3  1675.3  705.5   141.4
    1914.7  1914.7  736.0   143.0
    2154.0  2154.0  766.9   144.6
    2393.3  2393.3  798.0   146.0
    2632.7  2632.7  829.4   147.3
    2872.0  2872.0  861.1   148.4
    3111.3  3111.3  893.1   149.2
    3350.7  3350.7  925.5   149.8
    3590.0  3590.0  958.1   150.0</code></pre>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
